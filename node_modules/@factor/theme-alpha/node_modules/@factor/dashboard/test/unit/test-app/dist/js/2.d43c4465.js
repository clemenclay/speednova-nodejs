(window.webpackJsonp=window.webpackJsonp||[]).push([[2],{203:function(t,e,s){"use strict";s.r(e);var a=s(197),i=s(24),n=s(0),o=s(198),r=s(2).a.extend({components:{dashboardPage:o.d,factorLink:a.x},data:()=>({loading:!0,sending:!1}),metaInfo(){return{title:this.postTypeLabel}},computed:{postIndex(){return Object(n.D)(this.postType)||[]},getPostTypeConfig(){return Object(n.k)(this.postType)},templateLoader(){const{listTemplate:t}=this.getPostTypeConfig;return t||(()=>s.e(3).then(s.bind(null,705)))},postType(){return this.$route.params.postType||""},postTypeLabel(){var t,e;return null!==(e=null===(t=this.getPostTypeConfig)||void 0===t?void 0:t.namePlural)&&void 0!==e?e:""},postsMeta(){return this.postIndex&&this.postIndex.meta?this.postIndex.meta:{}},posts(){return this.postIndex&&this.postIndex.posts?this.postIndex.posts:[]},filters(){const t=this.postType;let{sort:e="createdAt"}=this.$route.query;const{page:s=1,status:a,category:i,tag:n,role:o,direction:r="descending"}=this.$route.query;return e={[e]:r},{postType:t,page:s,status:a,category:i,tag:n,role:o,sort:e}}},watch:{$route:function(){this.setPosts()}},mounted(){this.setPosts(),Object(n.q)("refresh-table",()=>{this.setPosts()})},methods:{async setPosts(){this.loading=!0,await Object(i.b)({...this.filters,cache:!1}),this.loading=!1}}}),l=(s(618),s(452)),u=Object(l.a)(r,(function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("dashboard-page",{key:t.postType,staticClass:"posts-dashboard",attrs:{title:t.postTypeLabel},scopedSlots:t._u([{key:"actions",fn:function(){return[t.getPostTypeConfig.noAddNew?t._e():s("factor-link",{attrs:{path:"/dashboard/posts/"+t.postType+"/add-new",btn:"primary","data-test":"add-post"}},[t._v("Add New →")])]},proxy:!0}])},[t._v(" "),s(t.templateLoader,{tag:"component",attrs:{list:t.posts,meta:t.postsMeta,loading:t.loading,sending:t.sending,"post-type":t.postType}})],1)}),[],!1,null,null,null);e.default=u.exports},434:function(t,e,s){"use strict";s.r(e);var a=s(2).a.extend({}),i=s(452),n=Object(i.a)(a,(function(){var t=this.$createElement,e=this._self._c||t;return e("div",{staticClass:"content-layout"},[e("router-view")],1)}),[],!1,null,null,null);e.default=n.exports},441:function(t,e,s){"use strict";s.r(e);var a=s(197),i=s(2).a.extend({components:{factorInputWrap:a.v}}),n=(s(609),s(452)),o=Object(n.a)(i,(function(){var t=this.$createElement;return(this._self._c||t)("factor-input-wrap",this._g(this._b({staticClass:"dashboard-input"},"factor-input-wrap",this.$attrs,!1),this.$listeners),[this._t("default")],2)}),[],!1,null,null,null);e.default=o.exports},443:function(t,e,s){"use strict";s.r(e);var a=s(198),i=s(24),n=s(2).a.extend({components:{dashboardInput:a.a,dashboardUserCard:a.g},props:{customValidity:{type:String,default:""},value:{type:Array,default:()=>[]},placeholder:{type:String,default:"Search"}},data:()=>({potentialAuthors:[],newAuthor:"",searchResults:[],authors:[],toggle:!1}),watch:{authors:{handler:function(t){this.$emit("input",t)},deep:!0},value:{handler:function(t){t&&t!=this.authors&&(this.authors=t)},immediate:!0}},async mounted(){const t=await Object(i.c)({postType:"user",conditions:{accessLevel:{$gt:99}},options:{limit:100}});this.potentialAuthors=t.map(t=>({name:`${t.displayName} (${t.email})`,value:t._id}))},methods:{addAuthor(){this.authors.includes(this.newAuthor)||this.authors.push(this.newAuthor),this.newAuthor=""},deleteItem(t){this.$delete(this.authors,t)},setValidity(){const t=this.value;let e="";this.min&&(!t||t.length<this.min)?e=`Add at least ${this.min} item`:this.max&&t&&t.length>this.max&&(e=`Add no more than ${this.max} items`),this.$emit("update:customValidity",e)}}}),o=(s(611),s(452)),r=Object(o.a)(n,(function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{staticClass:"user-list-input"},[s("div",{staticClass:"user-list-items"},[t._l(t.authors,(function(e,a){return s("div",{key:a,staticClass:"added-user"},[s("dashboard-user-card",{staticClass:"custom-list-item",attrs:{"post-id":e},on:{remove:function(e){return t.deleteItem(a)}}})],1)})),t._v(" "),s("div",{staticClass:"input-text"},[s("dashboard-input",{attrs:{list:t.potentialAuthors,input:"factor-input-select",placeholder:"Select Author"},on:{change:function(e){return t.addAuthor(e)}},model:{value:t.newAuthor,callback:function(e){t.newAuthor=e},expression:"newAuthor"}})],1)],2)])}),[],!1,null,null,null);e.default=r.exports},444:function(t,e,s){"use strict";s.r(e);var a=s(197),i=s(23),n=s(0),o=s(2).a.extend({components:{factorLoadingRing:a.y,dashboardNav:()=>s.e(3).then(s.bind(null,702)),dashboardHead:()=>s.e(3).then(s.bind(null,703))},metaInfo(){const t=this.$route.path.split("/").pop();return{title:Object(n.H)(t),description:"Factor Dashboard",titleTemplate:"%s - Fiction Dashboard"}},data(){return{loading:!0,activeRoute:this.$route.path,toggle:!1}},computed:{postType(){return this.$route.params.postType||""},postTypeConfig(){return Object(n.k)(this.postType)}},watch:{$route:function(t){this.activeRoute=t.path,this.toggleNav(!1)}},async mounted(){await i.g(),this.loading=!1},methods:{toggleNav(t){document&&(this.toggle=void 0===t?!this.toggle:t,this.clickHandler=()=>{this.toggle=!1,document.removeEventListener("click",this.clickHandler,!1)},this.toggle?document.addEventListener("click",this.clickHandler,!1):document.removeEventListener("click",this.clickHandler,!1))}}}),r=(s(612),s(613),s(452)),l=Object(r.a)(o,(function(){var t=this.$createElement,e=this._self._c||t;return e("div",{staticClass:"app-wrap"},[this.loading?[e("div",{staticClass:"user-loading"},[e("factor-loading-ring",{attrs:{width:"4em"}})],1)]:[e("div",{staticClass:"app-layout",class:this.toggle?"nav-overlay":""},[e("dashboard-head",{staticClass:"app-head"}),this._v(" "),e("div",{staticClass:"app-nav",on:{click:function(t){t.stopPropagation()}}},[e("dashboard-nav")],1),this._v(" "),e("div",{staticClass:"app-main"},[e("div",{staticClass:"app-main-content"},[this.$slots.default?this._t("default"):e("router-view")],2)])],1)]],2)}),[],!1,null,null,null);e.default=l.exports},445:function(t,e,s){"use strict";s.r(e);var a=s(197),i=s(198),n=s(2).a.extend({components:{dashboardPage:i.d,dashboardPane:i.e,factorLink:a.x}}),o=(s(614),s(452)),r=Object(o.a)(n,(function(){var t=this.$createElement,e=this._self._c||t;return e("dashboard-page",[e("dashboard-pane",[e("div",{staticClass:"four04"},[e("div",{staticClass:"pad"},[e("div",{staticClass:"title"},[this._v("Not Found (404)")]),this._v(" "),e("factor-link",{attrs:{path:"/dashboard"}},[this._v("Go to Dashboard →")])],1)])])],1)}),[],!1,null,null,null);e.default=r.exports},447:function(t,e,s){"use strict";s.r(e);var a=s(2).a.extend({components:{"el-signin":()=>s.e(0).then(s.bind(null,704))},metaInfo:()=>({title:"Login / Sign Up",description:"Login or register an account."})}),i=(s(616),s(452)),n=Object(i.a)(a,(function(){var t=this.$createElement,e=this._self._c||t;return e("div",{staticClass:"auth-form"},[e("el-signin")],1)}),[],!1,null,null,null);e.default=n.exports},449:function(t,e,s){"use strict";s.r(e);var a=s(197),i=s(0),n=s(23),o=s(2).a.extend({components:{factorLink:a.x},props:{postId:{type:String,default:""}},data:()=>({factorBtn:a.b}),computed:{post(){return this.postId?Object(i.D)(this.postId):{}},editText(){return this.meta&&this.meta.nameSingle?`Edit ${this.meta.nameSingle}`:"Edit"},meta(){return this.post.postType?Object(i.k)(this.post.postType):{}},author(){return this.post&&this.post.author?this.post.author:[]},accessLevel(){const t=Object(n.b)();return t?t.accessLevel:0},canEdit(){return this.accessLevel>100||this.author.includes(Object(n.f)())}}}),r=s(452),l=Object(r.a)(o,(function(){var t=this,e=t.$createElement,s=t._self._c||e;return t.postId&&t.canEdit?s("factor-link",{staticClass:"edit",attrs:{path:"/dashboard/posts/"+t.post.postType+"/edit",query:{_id:t.post._id}}},[t._v(t._s(t.editText)+" →")]):t._e()}),[],!1,null,null,null);e.default=l.exports},452:function(t,e,s){"use strict";function a(t,e,s,a,i,n,o,r){var l,u="function"==typeof t?t.options:t;if(e&&(u.render=e,u.staticRenderFns=s,u._compiled=!0),a&&(u.functional=!0),n&&(u._scopeId="data-v-"+n),o?(l=function(t){(t=t||this.$vnode&&this.$vnode.ssrContext||this.parent&&this.parent.$vnode&&this.parent.$vnode.ssrContext)||"undefined"==typeof __VUE_SSR_CONTEXT__||(t=__VUE_SSR_CONTEXT__),i&&i.call(this,t),t&&t._registeredComponents&&t._registeredComponents.add(o)},u._ssrRegister=l):i&&(l=r?function(){i.call(this,this.$root.$options.shadowRoot)}:i),l)if(u.functional){u._injectStyles=l;var d=u.render;u.render=function(t,e){return l.call(e),d(t,e)}}else{var c=u.beforeCreate;u.beforeCreate=c?[].concat(c,l):[l]}return{exports:t,options:u}}s.d(e,"a",(function(){return a}))},467:function(t,e,s){},468:function(t,e,s){},480:function(t,e,s){},482:function(t,e,s){},483:function(t,e,s){},484:function(t,e,s){},485:function(t,e,s){},487:function(t,e,s){},489:function(t,e,s){},494:function(t,e,s){},496:function(t,e,s){},503:function(t,e,s){},595:function(t,e,s){"use strict";var a=s(467);s.n(a).a},596:function(t,e,s){"use strict";var a=s(468);s.n(a).a},609:function(t,e,s){"use strict";var a=s(480);s.n(a).a},611:function(t,e,s){"use strict";var a=s(482);s.n(a).a},612:function(t,e,s){"use strict";var a=s(483);s.n(a).a},613:function(t,e,s){"use strict";var a=s(484);s.n(a).a},614:function(t,e,s){"use strict";var a=s(485);s.n(a).a},616:function(t,e,s){"use strict";var a=s(487);s.n(a).a},618:function(t,e,s){"use strict";var a=s(489);s.n(a).a},629:function(t,e,s){"use strict";var a=s(494);s.n(a).a},631:function(t,e,s){"use strict";var a=s(496);s.n(a).a},639:function(t,e,s){"use strict";var a=s(503);s.n(a).a},671:function(t,e,s){"use strict";s.r(e);var a=s(197),i=s(2).a.extend({components:{factorLoadingRing:a.y},props:{image:{type:String,default:""},text:{type:String,default:""},type:{type:String,default:"button"},loading:{type:Boolean,default:!1},circle:{type:String,default:""},btn:{type:String,default:""},disabled:{type:Boolean,default:!1},size:{type:String,default:""}},data:()=>({backupCircleClass:"lightcolor"}),computed:{scope(){return!("test"==this.btn&&!this.$testing.isTest)},buttonClass(){const t=["factor-btn","factor-btn-load"];return this.loading&&t.push("loading"),this.image&&t.push("with-img"),this.disabled&&t.push("disabled"),this.btn?t.push(this.btn):t.push("default"),this.size&&t.push(this.size),t},circleClass(){if(this.circle)return this.circle;let t="lightcolor";return["google","default","subtle"].forEach(e=>{(this.$el&&this.$el.classList.contains(e)||this.buttonClass.includes(e))&&(t="darkcolor")}),t}}}),n=(s(595),s(452)),o=Object(n.a)(i,(function(){var t=this,e=t.$createElement,s=t._self._c||e;return t.scope?s("button",t._g({class:t.buttonClass,attrs:{type:t.type}},t.$listeners),[s("span",{staticClass:"wrap-items"},[s("span",{staticClass:"btn-content"},[t.image?s("img",{attrs:{src:t.image,alt:"btn image"}}):t._e(),t._v(" "),t._t("default"),t._v(" "),t.text?s("span",{directives:[{name:"formatted-text",rawName:"v-formatted-text",value:t.text,expression:"text"}],staticClass:"txt"}):t._e()],2),t._v(" "),t.loading?s("transition",{attrs:{name:"fade"}},[t.loading?s("div",{staticClass:"waitload"},[s("factor-loading-ring",{class:t.circleClass,attrs:{width:"1.2em"}})],1):t._e()]):t._e()],1)]):t._e()}),[],!1,null,null,null);e.default=o.exports},676:function(t,e,s){"use strict";s.r(e);var a=s(198),i=s(199),n=s(0),o=s(2).a.extend({components:{dashboardInput:a.a},props:{postId:{type:String,required:!0}},data:()=>({}),computed:{post:{get(){return Object(n.D)(this.postId)||{}},set(t){Object(n.C)(this.postId,t)}},pageTemplates(){var t;return(null!==(t=Object(i.a)())&&void 0!==t?t:[]).map(t=>(t.slug&&!t.value&&(t.value=t.slug),t))}},watch:{},methods:{getPageTemplates:i.a}}),r=s(452),l=Object(r.a)(o,(function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{staticClass:"edit-page-templates"},[s("dashboard-input",{attrs:{list:t.pageTemplates,input:"factor-input-select",label:"Page Template"},model:{value:t.post.template,callback:function(e){t.$set(t.post,"template",e)},expression:"post.template"}})],1)}),[],!1,null,null,null);e.default=l.exports},677:function(t,e,s){"use strict";s.r(e);var a=s(198),i=s(199),n=s(0),o=s(2).a.extend({components:{dashboardInput:a.a},props:{postId:{type:String,required:!0}},data:()=>({template:"",settings:{},pageTemplateInfo:{}}),computed:{post:{get(){return Object(n.D)(this.postId)||{}},set(t){Object(n.C)(this.postId,t)}},fields(){return this.pageTemplateInfo.fields||this.postTypeSettings},postType(){return this.$route.params.postType||""},postTypeConfig(){return Object(n.k)(this.postType)},postTypeSettings(){return this.postTypeConfig.templateSettings||[]}},watch:{settings:{handler:function(t){this.post={...this.post,settings:t}},deep:!0},template:{handler:function(t){this.setPageTemplate(t)}},"post.template":{handler:function(t){t&&t!=this.template&&(this.template=t)},immediate:!0},"post.settings":{handler:function(t){t&&t!=this.settings&&(this.settings=t)},immediate:!0}},mounted(){this.setTemplateDefaults()},methods:{getPageTemplates:i.a,async setPageTemplate(t){this.pageTemplateInfo=await Object(i.b)(t),this.setTemplateDefaults()},setTemplateDefaults(){this.fields.forEach(t=>{const e=t._id;let s;void 0===this.settings[e]&&t.default&&(s=t.settings&&t.default&&Array.isArray(t.settings)&&Array.isArray(t.default)?t.default.map(e=>(t.settings&&t.settings.forEach(t=>{void 0===e[t._id]&&t.default&&(e[t._id]=t.default)}),e)):t.default,this.$set(this.settings,e,s))})}}}),r=s(452),l=Object(r.a)(o,(function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{staticClass:"edit-page-templates"},[0==t.fields.length?s("div",{staticClass:"no-options"},[t._v("No settings available for selected template.")]):t._l(t.fields,(function(e,a){return s("dashboard-input",{key:a,class:["engine-input",e.input],attrs:{list:e.list,input:"factor-input-"+e.input,label:e.label,description:e.description,inputs:e.settings||[],"post-id":t.postId},model:{value:t.settings[e._id],callback:function(s){t.$set(t.settings,e._id,s)},expression:"settings[field._id]"}})}))],2)}),[],!1,null,null,null);e.default=l.exports},680:function(t,e,s){"use strict";s.r(e);var a=s(2).a.extend({props:{icon:{type:String,default:""}},metaInfo:{link:[{vmid:"fa",rel:"stylesheet",href:"https://cdn.jsdelivr.net/npm/@fortawesome/fontawesome-free@5.12.1/css/all.min.css"}]}}),i=s(452),n=Object(i.a)(a,(function(){var t=this.$createElement;return(this._self._c||t)("i",{staticClass:"factor-icon",class:this.icon})}),[],!1,null,null,null);e.default=n.exports},683:function(t,e,s){"use strict";s.r(e);var a=s(197),i=s(198),n=s(2).a.extend({components:{factorInputWrap:a.v,factorInputEmail:a.l,factorInputDate:a.j,factorInputTags:a.s,factorInputEditor:a.k,factorInputText:a.t,factorInputPhone:a.o,factorInputCheckbox:a.i,factorInputBirthday:a.h,factorInputImageUpload:a.m,factorInputSelect:a.p,factorInputSubmit:a.r,factorInputPassword:a.n,factorInputTextarea:a.u,factorInputSortable:a.q,dashboardUserList:i.h},inheritAttrs:!1,props:{value:{type:null,default:()=>{}},label:{type:String,default:""},description:{type:String,default:""},format:{type:String,default:""},input:{type:String,default:""},inputClasses:{type:String,default:""},labelClasses:{type:String,default:""}},computed:{renderKey(){return this.$attrs["data-test"]?this.$attrs["data-test"]:this.label},isRequired(){return!(void 0===this.$attrs.required&&!this.$attrs["input-min"])},requiredClass(){return this.isRequired?"is-required":"is-optional"},inputFormat(){return this.format?this.format:"vertical"}},methods:{}}),o=(s(629),s(452)),r=Object(o.a)(n,(function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{key:t.renderKey,staticClass:"input-wrap",class:[t.requiredClass,t.inputFormat]},[t.label||t.description?s("div",{staticClass:"input-meta"},[s("label",{staticClass:"label-wrap"},[t.label?s("span",{staticClass:"label",class:t.labelClasses},[t._v(t._s(t.label))]):t._e()]),t._v(" "),t.description||t.$slots.description?s("div",{staticClass:"description-wrap"},[t.$slots.description?t._t("description"):s("span",{directives:[{name:"formatted-text",rawName:"v-formatted-text",value:t.description,expression:"description"}]})],2):t._e()]):t._e(),t._v(" "),s("div",{staticClass:"input-area"},[s("div",{staticClass:"the-input"},[t.input?s(t.input,t._g(t._b({tag:"component",class:t.inputClasses,attrs:{value:t.value}},"component",t.$attrs,!1),t.$listeners)):t._e(),t._v(" "),t._t("default")],2)])])}),[],!1,null,null,null);e.default=r.exports},686:function(t,e,s){"use strict";s.r(e);var a=s(197),i=s(0),n=s(8),o=s(201),r=s(2).a.extend({components:{factorLoadingRing:a.y},props:{value:{type:String,default:""},postId:{type:String,default:""},imageInputSelector:{type:String,default:"post-images"}},data:()=>({editor:null,session:null,content:"",loading:!0,destroyed:!1}),computed:{listeners(){return{...this.$listeners,change:t=>this.$emit("input",t.target.value)}}},watch:{value:function(t){this.easyMDE&&this.easyMDE.value()!=t&&this.easyMDE.value(t)}},beforeDestroy(){this.destroyed=!0},async mounted(){await this.initializeEditor(),this.loading=!1},methods:{async initializeEditor(){await Object(i.J)(100);const t=this.postId?{enabled:!0,uniqueId:this.postId,delay:5e3}:void 0,e=await Promise.all([s.e(8),s.e(0)]).then(s.t.bind(null,664,7));this.destroyed||(this.easyMDE=new e.default({element:this.$refs.editor,minHeight:"200px",spellChecker:!1,forceSync:!0,autoDownloadFontAwesome:!1,shortcuts:{drawImage:"Shift-Cmd-I"},autosave:t,toolbar:["bold","italic","strikethrough","code","quote","heading","|","unordered-list","ordered-list","|","link","image","table","|","preview","side-by-side","fullscreen","guide"],uploadImage:!0,imageUploadFunction:(t,e,s)=>{Object(o.b)({file:t,onError:t=>{var e;s(null!==(e=t.message)&&void 0!==e?e:"There was an error")},onFinished:t=>{e(t.url),Object(n.a)("addImageToInput",{selector:this.imageInputSelector,_id:t._id})}})}}),Object(n.b)("focus-editor",()=>{this.easyMDE.codemirror.focus()}),Object(n.b)("save-post",()=>{this.easyMDE.clearAutosavedValue()}),this.easyMDE.codemirror.on("change",()=>{this.$emit("input",this.easyMDE.value())}))}}}),l=(s(631),s(452)),u=Object(l.a)(r,(function(){var t=this.$createElement,e=this._self._c||t;return e("div",{staticClass:"editor-input"},[e("div",{directives:[{name:"show",rawName:"v-show",value:!this.loading,expression:"!loading"}],staticClass:"editor-wrap"},[e("textarea",this._g({ref:"editor",domProps:{value:this.value}},this.listeners))]),this._v(" "),this.loading?e("factor-loading-ring"):this._e()],1)}),[],!1,null,null,null);e.default=u.exports},696:function(t,e,s){"use strict";s.r(e);var a=s(197),i=s(2).a.extend({components:{factorBtn:a.b},inheritAttrs:!1,props:{el:{type:String,default:""}},computed:{btnComponent(){return this.el?this.el:a.b}}}),n=(s(639),s(452)),o=Object(n.a)(i,(function(){var t=this.$createElement,e=this._self._c||t;return e("div",{staticClass:"form-submit"},[e(this.btnComponent,this._g(this._b({tag:"component",attrs:{type:"submit"}},"component",this.$attrs,!1),this.$listeners),[this._t("default")],2)],1)}),[],!1,null,null,null);e.default=o.exports},711:function(t,e,s){"use strict";s.r(e);var a=s(2),i=s(197),n=s(0),o=s(1),r=a.a.extend({props:{btn:{type:String,default:""},size:{type:String,default:""},disabled:{type:Boolean,default:!1},path:{type:String,default:""},event:{type:String,default:""},query:{type:Object,default:()=>{}},loading:{type:Boolean,default:!1},text:{type:String,default:""}},render:function(t){let e=this.path,s=this.text||this.$slots.default,a="span",r={},l={};const u=Object(n.s)(this.query,n.l)||{};e=e||Object(n.m)(u)?e:this.$route.path,e=Object(o.c)("link-path",e.trim(),{query:u});["http:","https:","ftp:","mailto:","file:","data:","irc:"].some(t=>e.includes(t))?(a="a",r={href:e},l=[]):e&&(a="router-link",r={},l={to:{path:e,query:u}});const d={"factor-link":!0};if(this.btn){d["btn-link"]=!0;const e={btn:this.btn,disabled:this.disabled,size:this.size,loading:this.loading};let a;a=this.btnElement?this.btnElement:this.$route.path.includes("dashboard")?i.d:i.b,s=t(a,{props:e,attrs:e},[s])}this.disabled&&(d.disabled=!0),this.$route.path!=this.path&&this.$route.meta.activePath!=this.path||(d["active-path"]=!0);const c=this.event?{click:t=>(t.preventDefault(),Object(n.i)(this.event,u),!1)}:this.$listeners;return t(a,{class:d,attrs:r,props:l,on:c,..."a"==a||"span"==a?{}:{nativeOn:c}},[s])}}),l=(s(596),s(452)),u=Object(l.a)(r,void 0,void 0,!1,null,null,null);e.default=u.exports}}]);